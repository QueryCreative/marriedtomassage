- if defined?(@centerLat)
  :javascript
    var ready = function() {
            var mapOptions = {
              center: { lat: #{@centerLat}, lng: #{@centerLng}},
              zoom: #{@zoom},
              styles: [{"featureType":"water","stylers":[{"color":"#0099d8"},{"visibility":"simplified"}]},{"featureType":"landscape","stylers":[{"color":"#f2f2f2"}]},{"featureType":"road","stylers":[{"saturation":-100},{"lightness":45}]},{"featureType":"road.highway","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#444444"}]},{"featureType":"transit","stylers":[{"visibility":"off"}]},{"featureType":"poi","stylers":[{"visibility":"off"}]}]
          };
            var map = new google.maps.Map(document.getElementById('map'), mapOptions);
            var locations = [
              {lat: 40.726828, lng: -74.007677, title: '325 Hudson Street, New York, NY', url: '/locations/new-york'},
              {lat: 39.959560, lng: -75.160838, title: '401 North Broad Street, Philadelphia, PA', url: '/locations/philadelphia'},
              {lat: 41.872911, lng: -87.633270, title: '717 South Wells Street, Chicago, IL', url: '/locations/chicago'},
              {lat: 39.100806, lng: -94.581167, title: '1102 Grand Street, Kansas City, MO', url: '/locations/kansas-city'},
              {lat: 29.760427, lng: -95.369803, title: 'Houston, TX - coming soon', url: '/locations/houston'}
            ];
            for(var i=0; i<locations.length; i++){
              var l = locations[i];
              var loc = new google.maps.LatLng(l.lat, l.lng)
              var marker = new google.maps.Marker({
                position: loc,
                map: map,
                title: l.title,
                icon: "#{image_path 'map-icon.png'}",
                url: l.url
              });
              var infowindow = new google.maps.InfoWindow();
              google.maps.event.addListener(marker, 'click', function(){
                window.location = this.url
              });
              google.maps.event.addListener(marker, 'mouseover', function(){
                infowindow.setContent(this.title);
                infowindow.open(map, this);
              });
              google.maps.event.addListener(marker, 'mouseout', function(){
                infowindow.close();
              });
            }
            // google.maps.event.addDomListener(window, 'load', ready);
      };
      $(document).on('ready page:load page:update', ready);

